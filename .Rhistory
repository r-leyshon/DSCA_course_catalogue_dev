install.packages('tidyverse')
library(dplyr)
setwd('/Users/richardleyshon/Documents/DSCA_course_catalogue_dev')
View(output_dataframe)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
#load custom functions
source('functions/functions.R')
#load Github API credentials file
source('git_ignore/api_credentials.R')
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
View(output_dataframe)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
install.packages('xlsx')
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
install.packages('writexl')
?writexl::write_xlsx
#write data to file
writexl::write_xlsx(output_dataframe, "output_data/course_catalogue.xlsx",
sheetName = paste(Sys.Date()),
row.names = FALSE)
#write data to file
writexl::write_xlsx(output_dataframe, "output_data/course_catalogue.xlsx"
# sheetName = paste(Sys.Date()),
# row.names = FALSE
)
#write data to file
writexl::write_xlsx(output_dataframe, "output_data/course_catalogue.xlsx"
# sheetName = paste(Sys.Date()),
# row.names = FALSE
)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
install.packages('zip')
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
# Read the 2 xlsx file names from output_data directory
files2zip <- dir('output_data/', full.names = TRUE)
files2zip
# Read the 2 xlsx file names from output_data directory
files2zip <- dir('output_data/*xlsx', full.names = TRUE)
files2zip
# Read the 2 xlsx file names from output_data directory
files2zip <- list.files(path = 'output_data', pattern = 'xlsx$')
files2zip
#zip folder appears to not like spaces and can't have colons in filename
current_time <- str_replace_all(as.character(Sys.time()), ":", "-")
current_time <- str_replace_all(current_time, " ", "_")
current_directory <- getwd()
#create the folder name, using the sys.time to increment
zip_folder_name <- paste0(current_directory,"/zipped_output/dsca_cc_", current_time, ".zip")
#zip files to folder
zip::zipr(zip_folder_name, files2zip)
zip_folder_name
files2zip
#zip files to folder
zip::zipr(zip_folder_name, files2zip)
files2zip <-  dir('output_data/', full.names = TRUE)
#zip files to folder
zip::zipr(zip_folder_name, files2zip)
files2zip
# Read the 2 xlsx file names from output_data directory
files2zip <- paste0("output_data//", list.files(path = 'output_data', pattern = 'xlsx$'))
files2zip
files2zip <-  dir('output_data/', full.names = TRUE)
files2zip
# Read the 2 xlsx file names from output_data directory
files2zip <- paste0("output_data//", list.files(path = 'output_data', pattern = 'xlsx$'))
current_time <- str_replace_all(as.character(Sys.time()), ":", "-")
current_time <- str_replace_all(current_time, " ", "_")
current_directory <- getwd()
#create the folder name, using the sys.time to increment
zip_folder_name <- paste0(current_directory,"/zipped_output/dsca_cc_", current_time, ".zip")
#zip files to folder
zip::zipr(zip_folder_name, files2zip)
View(output_dataframe)
print(output_dataframe$course_summary[1])
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
#lower case of all columns
lowered_output <-
apply(output_dataframe,
FUN = tolower,
#iterate over columns
MARGIN = 2)
#initiate variables for while loop
count <- 1
course_summaries <- character()
grep("course summary", lowered_output[1, ]
grep("course summary", lowered_output[1, ])
#find first instance of "course summary"
start_index <- grep("course summary", lowered_output[1, ])[1]+1 #+1 for column following "course summary"
View(lowered_output)
end_index <- grep("learning objective", lowered_output[1, ])[1]-1
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
clear()
source('~/Documents/DSCA_course_catalogue_dev/munge/06_scrape_course_summary.R', echo=TRUE)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
#lower case of all columns
lowered_output <-
apply(output_dataframe,
FUN = tolower,
#iterate over columns
MARGIN = 2)
count <- 1
course_summaries <- character()
View(lowered_output)
View(parsed_course_pages)
print(output_dataframe$site_link[11])
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(extract_lo_detail)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
View(output_dataframe)
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
count <- 1
course_summaries <- character()
View(lowered_output)
output_dataframe$course_repo_names[7]
output_dataframe$course_repo_names[6]
output_dataframe$site_link[6]
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
View(lowered_output)
#find first instance of "course summary"
start_index <- grep("course summary", lowered_output[4, ])[1]+1 #+1 for column following "course summary"
#find first instance of "learning objective"
end_index <- grep("course objective", lowered_output[4, ])[1]-1 #-1 for column preceeding "learning outcome"
end_index
output_dataframe$site_link[4]
output_dataframe$site_link[7]
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
clear()
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
View(output_dataframe)
output_dataframe <- output_dataframe %>% select(readme_title,
version_number,
course_summary,
course_objective,
learning_objective_detail,
course_type = course_types,
skill_level,
site_link,
lead_developer,
course_reviewer,
)
