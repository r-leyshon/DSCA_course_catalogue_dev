current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_versions, y = prior_state_course_versions)) == 0 &
length(setdiff(x = prior_state_course_versions, y = newstate_course_versions)) > 0) {
removed_course <-  setdiff(x = prior_state_course_versions, y = newstate_course_versions)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
}
newstate_course_versions <- paste(output_dataframe$readme_title, output_dataframe$version_number,
sep = " - Version ")
prior_state_course_versions <- newstate_course_versions
newstate_course_versions <- newstate_course_versions[1:length(newstate_course_versions)-1]
prior_state_course_versions
newstate_course_versions
if (all(newstate_course_versions == prior_state_course_versions)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_versions, y = prior_state_course_versions)) > 0 &
length(setdiff(x = prior_state_course_versions, y = newstate_course_versions)) > 0) {
new_course <-  setdiff(x = newstate_course_versions, y = prior_state_course_versions)
removed_course <-  setdiff(x = prior_state_course_versions, y = newstate_course_versions)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_versions, y = prior_state_course_versions)) > 0 &
length(setdiff(x = prior_state_course_versions, y = newstate_course_versions)) == 0) {
new_course <-  setdiff(x = newstate_course_versions, y = prior_state_course_versions)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_versions, y = prior_state_course_versions)) == 0 &
length(setdiff(x = prior_state_course_versions, y = newstate_course_versions)) > 0) {
removed_course <-  setdiff(x = prior_state_course_versions, y = newstate_course_versions)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
}
newstate_course_names <- output_dataframe$readme_title
newstate_course_names
if (all(newstate_course_names == prior_state_course_names)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
}
newstate_course_names <- output_dataframe$readme_title
prior_state_course_names <- newstate_course_names
if (all(newstate_course_names == prior_state_course_names)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
}
prior_state_course_names <- c(prior_state_course_names, "some course that was removed", "and another deleted course")
if (all(newstate_course_names == prior_state_course_names)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
}
newstate_course_versions <- paste(output_dataframe$readme_title, output_dataframe$version_number,
sep = " - Version ")
prior_state_course_versions <- newstate_course_versions
prior_state_course_versions
prior_state_course_versions[12]
prior_state_course_versions[12] <- "Version controlled RStudio projects - Version 1.1"
prior_state_course_versions
prior_state_course_versions
newstate_course_versions
if (all(newstate_course_names == prior_state_course_names)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
} else {
updated_course <- setdiff(x = newstate_course_versions, y = prior_state_course_versions)
current_status <- condition_statuses[5]
status_message <- paste0(
"The following course version(s) have been updated: ",
paste0(updated_course, collapse = ", ")
)
print(status_message)
}
newstate_course_names
prior_state_course_names
newstate_course_names
newstate_course_names <- output_dataframe$readme_title
prior_state_course_names <- newstate_course_names
if (all(newstate_course_names == prior_state_course_names)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
} else {
updated_course <- setdiff(x = newstate_course_versions, y = prior_state_course_versions)
current_status <- condition_statuses[5]
status_message <- paste0(
"The following course version(s) have been updated: ",
paste0(updated_course, collapse = ", ")
)
print(status_message)
}
if (all(newstate_course_versions == prior_state_course_versions)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
} else {
updated_course <- setdiff(x = newstate_course_versions, y = prior_state_course_versions)
current_status <- condition_statuses[5]
status_message <- paste0(
"The following course version(s) have been updated: ",
paste0(updated_course, collapse = ", ")
)
print(status_message)
}
if (all(newstate_course_versions == prior_state_course_versions)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
} else {
updated_course <- setdiff(x = newstate_course_versions, y = prior_state_course_versions)
current_status <- condition_statuses[5]
print(current_status)
status_message <- paste0(
"The following course version(s) have been updated: ",
paste0(updated_course, collapse = ", ")
)
print(status_message)
}
saveRDS(object = current_status, file = "cache/prior_status.rds")
saveRDS(object = status_message, file = "cache/prior_status_message.rds")
saveRDS(object = newstate_course_names, file = "cache/prior_coursenames.rds")
saveRDS(object = newstate_course_versions, file = "cache/prior_courseversions.rds")
#course names from last run
prior_state_course_names <- readRDS("cache/prior_coursenames.rds")
prior_state_course_names
#course name versions from last run
prior_state_course_versions <- readRDS("cache/prior_courseversions.rds")
prior_state_course_versions
if (all(newstate_course_versions == prior_state_course_versions)) {
current_status <- condition_statuses[1]
status_message <- "Course catalogue script run. No change detected."
print(current_status)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[2]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ", paste0(new_course, collapse = ", "),
". In addition, the following course(s) have been removed: ", paste0(removed_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) > 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) == 0) {
new_course <-  setdiff(x = newstate_course_names, y = prior_state_course_names)
current_status <- condition_statuses[3]
print(current_status)
status_message <- paste0(
"The following course(s) have been added: ",
paste0(new_course, collapse = ", ")
)
print(status_message)
} else if (length(setdiff(x = newstate_course_names, y = prior_state_course_names)) == 0 &
length(setdiff(x = prior_state_course_names, y = newstate_course_names)) > 0) {
removed_course <-  setdiff(x = prior_state_course_names, y = newstate_course_names)
current_status <- condition_statuses[4]
print(current_status)
status_message <- paste0(
"The following course(s) have been removed: ",
paste0(removed_course, collapse = ", ")
)
print(status_message)
} else {
updated_course <- setdiff(x = newstate_course_versions, y = prior_state_course_versions)
current_status <- condition_statuses[5]
print(current_status)
status_message <- paste0(
"The following course version(s) have been updated: ",
paste0(updated_course, collapse = ", ")
)
print(status_message)
}
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
current_status == 100
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
version_number + 0.1,
"Status Condition =",
current_status,
"Status message =",
status_message)
email_text
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Status Condition =",
current_status,
". Status message =",
status_message)
email_text
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
"Please find attached the latest version of DSCA course catalogue.",
". Status Condition =",
current_status,
". Status message =",
status_message)
email_text
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Please find attached the latest version of DSCA course catalogue.",
". Status Condition =",
current_status,
". Status message =",
status_message)
email_text
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Please find attached the latest version of DSCA course catalogue.",
" Status Condition =",
current_status,
". Status message =",
status_message)
email_text
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Status Condition =",
current_status,
". Status message =",
status_message,
sep="\n")
email_text
email_text <- cat(paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Status Condition =",
current_status,
". Status message =",
status_message,
sep="\n"))
email_text
email_text <- cat(paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Status Condition =",
current_status,
". Status message =",
status_message,
sep="\n"))
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version",
version_number,
". Status Condition =",
current_status,
". Status message =",
status_message,
collapse="\n")
email_text
email_text <- paste("Automated email sent from dsca_course_catalogue_dev version.",
version_number,
"Status Condition =",
current_status,
"Status message =",
status_message,
collapse="\n")
email_text
source('~/Documents/DSCA_course_catalogue_dev/src/initialise.R', echo=TRUE)
